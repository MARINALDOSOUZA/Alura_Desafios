import os

def limpar_tela():
    os.system('cls' if os.name == 'nt' else 'clear')

def sistema_emprestimo_seguro():
    while True:
        limpar_tela()
        print("=== Financeira: An√°lise de Cr√©dito com Margem de Seguran√ßa ===")
        
        # 1. Coleta de Dados
        nome = input("Nome do cliente: ").strip().title()
        try:
            renda_mensal = float(input("Renda mensal l√≠quida (R$): "))
            valor_emprestimo = float(input("Valor do empr√©stimo (R$): "))
        except ValueError:
            print("Erro: Valores inv√°lidos.")
            input("Enter para reiniciar...")
            continue

        # 2. Pr√©-Requisitos B√°sicos
        if renda_mensal < 1500:
            print("\n[NEGADO] Renda inferior ao m√≠nimo exigido (R$ 1.500,00).")
        elif valor_emprestimo < 2000 or valor_emprestimo > 10000:
            print("\n[NEGADO] O valor deve ser entre R$ 2.000 e R$ 10.000.")
        else:
            # 3. Sele√ß√£o do Plano
            print(f"\n[PR√â-APROVADO] Cliente: {nome}")
            print("-" * 50)
            print("Planos com Juros de 30% ao ano (sobre o valor emprestado):")
            print("1. 12 Meses (Total + 30%)")
            print("2. 24 Meses (Total + 60%)")
            print("3. 36 Meses (Total + 90%)")
            print("4. 48 Meses (Total + 120%)")
            print("-" * 50)
            
            opcao = input("Escolha o prazo (1-4): ").strip()
            
            # Defini√ß√£o dos Meses e da Taxa de Lucro Total
            meses = 0
            taxa_lucro = 0.0
            
            if opcao == '1':
                meses = 12
                taxa_lucro = 0.30 # 30%
            elif opcao == '2':
                meses = 24
                taxa_lucro = 0.60 # 60%
            elif opcao == '3':
                meses = 36
                taxa_lucro = 0.90 # 90%
            elif opcao == '4':
                meses = 48
                taxa_lucro = 1.20 # 120%
            
            if meses > 0:
                # 4. C√°lculos Financeiros
                lucro_banco = valor_emprestimo * taxa_lucro
                total_a_pagar = valor_emprestimo + lucro_banco
                valor_parcela = total_a_pagar / meses
                
                # --- A VALIDA√á√ÉO DA MARGEM DE 30% ---
                limite_parcela = renda_mensal * 0.30
                
                print("\n" + "="*40)
                print("       AN√ÅLISE DE RISCO FINANCEIRO")
                print("="*40)
                print(f"Sua Renda:           R$ {renda_mensal:.2f}")
                print(f"Margem M√°xima (30%): R$ {limite_parcela:.2f}")
                print(f"Parcela Simulada:    R$ {valor_parcela:.2f}")
                print("-" * 40)

                # Decis√£o Final com IF/ELSE
                if valor_parcela <= limite_parcela:
                    print("‚úÖ CR√âDITO APROVADO COM SUCESSO!")
                    print(f"Total a pagar: R$ {total_a_pagar:.2f}")
                    print(f"Lucro da opera√ß√£o: R$ {lucro_banco:.2f}")
                else:
                    print("üö´ CR√âDITO NEGADO!")
                    print("Motivo: A parcela excede 30% da sua renda mensal.")
                    print("Solu√ß√£o: Tente aumentar o n√∫mero de parcelas ou diminuir o valor.")
            else:
                print("Op√ß√£o de plano inv√°lida.")

        # 5. Reiniciar
        if input("\nPressione Enter para novo cliente ou 'S' para sair: ").lower() == 's':
            break

if __name__ == "__main__":
    sistema_emprestimo_seguro()
