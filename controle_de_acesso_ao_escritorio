import random
from datetime import time

# Configura√ß√£o dos hor√°rios de acesso (In√≠cio, Fim)
# Adicionei 'manutencao' para testar o caso de virada de noite (22h √†s 05h)
HORARIOS_ACESSO = {
    "executivo":      (time(8, 0),  time(18, 0)),
    "administrativo": (time(9, 0),  time(17, 0)),
    "seguran√ßa":      (time(0, 0),  time(23, 59)),
    "manutencao":     (time(22, 0), time(5, 0)) 
}

def gerar_hora_simulada():
    """Gera um objeto time com hora e minuto aleat√≥rios."""
    h = random.randint(0, 23)
    m = random.randint(0, 59)
    return time(h, m)

def validar_credenciais():
    """Recebe e valida os dados do usu√°rio."""
    print("--- Sistema de Controle de Acesso ---")
    nome = input("Nome do funcion√°rio: ").strip().title()
    
    while True:
        entrada_codigo = input("C√≥digo de acesso (4 d√≠gitos): ")
        # Valida√ß√£o simples para garantir que s√£o n√∫meros
        if entrada_codigo.isdigit() and len(entrada_codigo) == 4:
            return nome, int(entrada_codigo)
        else:
            print("Erro: O c√≥digo deve conter exatamente 4 n√∫meros.")

def verificar_permissao(setor, hora_atual):
    """
    L√≥gica central com IF/ELIF/ELSE para verificar janelas de tempo.
    """
    # 1. Verifica se o setor existe
    if setor not in HORARIOS_ACESSO:
        return False, "Setor n√£o encontrado."

    inicio, fim = HORARIOS_ACESSO[setor]

    # 2. L√≥gica para turnos normais (In√≠cio < Fim, ex: 08:00 as 18:00)
    if inicio < fim:
        if inicio <= hora_atual <= fim:
            return True, "Hor√°rio Comercial - Acesso Permitido."
        else:
            return False, "Fora do Hor√°rio Comercial."

    # 3. L√≥gica para turnos noturnos/madrugada (In√≠cio > Fim, ex: 22:00 as 05:00)
    else: 
        # O operador 'or' √© crucial aqui: ou √© tarde da noite, ou √© de manh√£ cedo
        if hora_atual >= inicio or hora_atual <= fim:
            return True, "Turno Noturno - Acesso Permitido."
        else:
            return False, "Fora do Hor√°rio de Turno."

def main():
    nome, codigo = validar_credenciais()
    
    setor_input = input("Informe o setor desejado (Executivo, Administrativo, Seguran√ßa, Manutencao): ").lower()
    
    # Geramos a hora apenas para a simula√ß√£o
    hora_simulada = gerar_hora_simulada()
    
    print(f"\n[Simula√ß√£o] Hora do sistema: {hora_simulada.strftime('%H:%M')}")
    
    # Chamada da fun√ß√£o de verifica√ß√£o
    permitido, mensagem = verificar_permissao(setor_input, hora_simulada)

    # Exibi√ß√£o do Resultado Final com IF/ELSE
    if permitido:
        print(f"‚úÖ BEM-VINDO(A), {nome}! {mensagem}")
        
    else:
        print(f"üö´ ACESSO NEGADO para {nome}. Motivo: {mensagem}")

if __name__ == "__main__":
    main()
